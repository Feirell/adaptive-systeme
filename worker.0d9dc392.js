parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"tMcB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WorkerHelper=void 0;const e=r=>{if(r instanceof Error)return{message:r.message,stack:r.stack,name:r.name};if("object"!=typeof r)return r;{const s=JSON.stringify(r,(t,s)=>s==r?s:e(s));try{return JSON.parse(s)}catch(t){return console.error("could not parse:",s,"from",r),r}}};class r{constructor(e=self){this.worker=e,this.ready=this.expectType("ready"),this.readyState=!1,this.sendControl("ready"),this.ready.then(()=>this.readyState=!0)}async waitForAnyMessage(){return await this.ready,new Promise((e,r)=>{const t=e=>{if(!e.target)throw new Error("event.target is falsy");e.target.removeEventListener("message",s),e.target.removeEventListener("messageerror",a)},s=r=>{t(r),e(r.data)},a=e=>{t(e),r(e)};this.worker.addEventListener("message",s),this.worker.addEventListener("messageerror",a)})}async expectType(e){const r=await this.waitForAnyMessage();if(r.type!=e)throw new Error("received message with type "+r.type+" which was not expected, expected was "+e);return r}async waitForType(e){for(;;){const r=await this.waitForAnyMessage();if(r.type==e)return r}}sendMessage(r,t,s="normal"){if("control"!=s&&!this.readyState)throw new Error("you can not send a message till this.ready resolved");this.worker.postMessage({channel:s,type:r,payload:e(t),timestamp:Date.now()})}sendError(e,r){this.sendMessage(e,r,"error")}sendControl(e){this.sendMessage(e,void 0,"control")}}exports.WorkerHelper=r;
},{}],"BlS2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PRNG=void 0;const e=e=>Array.from(e).sort().filter((e,t,r)=>r.indexOf(e)==t);class t{constructor(e){e|=0,(e%=2**31-1)<=0&&(e+=2**31-2),this.seed=e}next(){return this.seed=48271*this.seed%(2**31-1)}nextFloat(){return(this.next()-1)/(2**31-2)}randomInteger(e,t,r=!1){return e=Math.ceil(e),t=Math.floor(t),Math.floor(this.nextFloat()*(t-e+r))+e}randomIntegerExceptUnordered(t,r,n,o=!1){this.randomIntegerExcept(t,r,e(n),o)}randomIntegerExcept(e,t,r,n=!1){"number"==typeof r&&(r=[r]),r.length;let o=this.randomInteger(e,t-r.length,n);for(const s of r){if(o<s)return o;o>=s&&o++}return o}}exports.PRNG=t;
},{}],"MnMT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PathCreator=void 0;var e=require("../prng");class s{constructor(s,t,r=new e.PRNG(574100223)){this.availableNodes=s,this.numberOfTries=t,this.prng=r,this.calls=[],this.setAvailableNodes(s)}setAvailableNodes(e){this.availableNodes=e}getAvailableNodes(){return this.availableNodes}countMinorStep(){const e=this.isAllowedToContinue();return this.calls[this.calls.length-1]++,e}minorSteps(){return this.calls[this.calls.length-1]}isAllowedToContinue(){return this.minorSteps()<this.numberOfTries}progress(){return this.calls.push(0),this.step()}next(){return this.isFinished()?{done:!0,value:void 0}:{done:!1,value:this.progress()}}[Symbol.iterator](){return this}}exports.PathCreator=s;
},{"../prng":"BlS2"}],"pjYw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDistance=o,exports.getPathLength=c,exports.fisherYatesShuffle=l,exports.pathEqual=h,exports.switchRandomTwo=g,exports.turnTwoAround=i,exports.isPathBetter=f,exports.pathCompare=m,exports.shiftRandomRange=d,exports.shiftRange=x,exports.flipRandomSection=I,exports.flipSection=w,exports.clamp=E;var t=require("./prng");const{abs:n,pow:e,sqrt:r}=Math;function o(t,o){return r(e(n(t.x-o.x),2)+e(n(t.y-o.y),2))}const a=Symbol("lengthCache"),s=t=>a in t;function c(t){if(t.length<=1)throw new Error("length can not be calculated for an path with one or non nodes");let n=0,e=t[0];for(let r=1;r<t.length;r++){const a=t[r];n+=o(e,a),e=a}return n+=o(t[0],e)}function l(t,n){const e=Array.from(t);for(let r=0;r<e.length-2;r++){const t=n.randomInteger(r,e.length),o=e[r];e[r]=e[t],e[t]=o}return e}function h(t,n){if(t.length!=n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].name!=n[e].name)return!1;return!0}function u(t,n,e){const r=Array.from(t),o=r[n];return r[n]=r[e],r[e]=o,r}function g(n,e){e||(e=new t.PRNG(Math.random()*Number.MAX_SAFE_INTEGER));const r=e.randomInteger(0,n.length);return u(n,r,e.randomIntegerExcept(0,n.length,r))}function i(n,e){e||(e=new t.PRNG(Math.random()*Number.MAX_SAFE_INTEGER));const r=e.randomInteger(0,n.length);return u(n,r,(r+1)%n.length)}function f(t,n){return-1==m(t,n)}function m(t,n){const e=c(t)-c(n);return e<0?-1:e>0?1:0}const p=(t,n)=>Math.max((t-n)*t,n);function d(t,n){const e=t.randomInteger(0,n.length),r=t.randomInteger(1,n.length);return x(n,e,r,t.randomInteger(1,p(n.length,r)))}function x(t,n,e,r){const o=t.length;let a;r%=p(o,e);do{a=t.slice(0);const s=Math.min(r,o-e);for(let r=0;r<s;r++){let s=(n+r+e)%o;a[(n+r)%o]=t[s]}for(let r=0;r<e;r++){const e=(n+r)%o;a[(n+s+r)%o]=t[e]}n+=s,r-=s,t=a}while(r>0);return a}function I(t,n){return w(n,t.randomInteger(0,n.length),t.randomInteger(1,n.length))}function w(t,n,e){const r=t.slice(0);for(let o=0;o<Math.floor(e/2);o++){const a=(n+o)%t.length,s=(n+e-o-1)%t.length;r[a]=t[s],r[s]=t[a]}return r}function E(t,n,e){return t<n?n:t>e?e:t}
},{"./prng":"BlS2"}],"APsG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UniqueItemCombination=exports.UniqueIndexCombination=void 0;const t=(t,e=1)=>{let n=1;for(;t>e;)n*=t--;return n},e=(e,n,r)=>t(n-1-e,n-r),n=(e,n)=>t(e,e-n),r=(t,n)=>{const r=new Uint32Array(n);for(let i=0;i<n;i++)r[i]=e(i,t,n);return r};class i{constructor(t,e=t){this.letters=t,this.places=e,this.currentIndex=0,this.groupLength=r(this.letters,this.places),this.maxCombinations=n(this.letters,this.places)}next(){if(this.currentIndex<this.maxCombinations){const t=this.places,e=new Array(t),n=new Array(t).fill(!1);for(let r=0;r<t;r++){let i=Math.floor(this.currentIndex/this.groupLength[r])%(this.letters-r);for(let e=0;e<t;e++)n[e]&&i>=e&&i++;n[i]=!0,e[r]=i}return this.currentIndex++,{done:!1,value:e}}return{done:!0,value:void 0}}[Symbol.iterator](){return this}}exports.UniqueIndexCombination=i;class o{constructor(t,e=t.length){this.items=t,this.combinationLength=e,this.indexCombinator=new i(t.length)}next(){const t=this.indexCombinator.next();if(t.done)return t;{const e=this.combinationLength,n=new Array(e);for(let r=0;r<e;r++)n[r]=this.items[t.value[r]];return{done:!1,value:n}}}[Symbol.iterator](){return this}}exports.UniqueItemCombination=o;const s=t=>{const e={next:()=>({value:t(),done:!1}),[Symbol.iterator]:()=>e};return e};
},{}],"yHL5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BruteForce=void 0;var t=require("./path-creator"),e=require("../helper"),r=require("../unique-item-combiner");class s extends t.PathCreator{constructor(t,s){super(t,s),this.allCombination=new r.UniqueItemCombination(this.availableNodes.slice(0)),this.done=!1,this.shortestLength=(0,e.getPathLength)(t),this.shortestPath=t}step(){for(const t of this.allCombination){if(!this.countMinorStep())break;let r=(0,e.getPathLength)(t);if(!this.shortestLength||r<this.shortestLength)return this.shortestLength=r,this.shortestPath=t,t}if(null==this.shortestPath)throw this.done=!0,new Error("there are no available combinations");return this.done=!0,this.shortestPath}isFinished(){return this.done}}exports.BruteForce=s,s.processorName="BruteForce";
},{"./path-creator":"MnMT","../helper":"pjYw","../unique-item-combiner":"APsG"}],"wBHp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HillClimbing=void 0;var e=require("./path-creator"),i=require("../helper"),t=require("../prng");class s{constructor(e,i){this.value=e,this.allowedTries=i,this.finishedFlag=!1}findNext(){let e=this.allowedTries;const i=this.value,t=this.calculateFit(i);let s=i,r=t;for(;e-- >0;)if(s=this.step(s),r=this.calculateFit(s),this.improved(r,t))return this.value=s;return this.finishedFlag=!0,i}finished(){return this.finishedFlag}}class r extends s{constructor(e,i,s=new t.PRNG(1e4)){super(e,i),this.prng=s}step(e){return(0,i.switchRandomTwo)(e,this.prng)}calculateFit(e){return(0,i.getPathLength)(e)}improved(e,i){return e<i}}class l extends e.PathCreator{setAvailableNodes(e){this.availableNodes=e,this.hillClimber=new r(e,this.numberOfTries)}step(){return this.hillClimber.findNext()}isFinished(){return this.hillClimber.finished()}}exports.HillClimbing=l,l.processorName="HillClimbing";
},{"./path-creator":"MnMT","../helper":"pjYw","../prng":"BlS2"}],"d2xA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EvolutionaryAlgorithm=exports.sortBest=void 0;var t=require("../helper"),e=require("./path-creator");const o=(e,o)=>(0,t.pathCompare)(e.phenotype,o.phenotype),i=t=>Array.from(t).sort(o);exports.sortBest=i;const s=t=>{let e=t[0];for(let i=1;i<t.length;i++)1==o(e,t[i])&&(e=t[i]);return e};class r extends e.PathCreator{constructor(){super(...arguments),this.populationSize=100,this.population=null,this.finished=!1,this.lastBest=this.doGeneration()}step(){for(let e=0;e<this.numberOfTries;e++){const o=this.doGeneration();if((0,t.isPathBetter)(o,this.lastBest))return this.lastBest=o;e%1e4==0&&console.log("trying for",e)}return this.finished=!0,this.lastBest}isFinished(){return this.finished}doGeneration(){if(null==this.population)this.population=this.createInitialPopulation(this.availableNodes);else{let t=[];const e=this.parentSelection(this.population);for(const o of e){const e=this.recombination(o);t=t.concat(e.parents,e.children.map(t=>this.mutate(t)))}this.population=this.environmentSelection(t)}return s(this.population).phenotype}}exports.EvolutionaryAlgorithm=r;
},{"../helper":"pjYw","./path-creator":"MnMT"}],"qLjA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.selectRandomX=r;var e=require("./helper");function r(r,t,s){return(0,e.fisherYatesShuffle)(r,s).slice(0,t).map(e=>[e])}
},{"./helper":"pjYw"}],"zL5D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MoreComplexEA=void 0;var e=require("./evolutionary-algorithm"),t=require("../helper"),r=require("../es-helper");class i extends e.EvolutionaryAlgorithm{constructor(){super(...arguments),this.childrenSize=.75*this.populationSize|0,this.switchAmount=1}createInitialPopulation(e){const r=new Array(this.populationSize);for(let i=0;i<this.populationSize;i++)r[i]={phenotype:(0,t.fisherYatesShuffle)(e,this.prng)};return r}parentSelection(e){return(0,r.selectRandomX)(e,this.childrenSize,this.prng)}recombination(e){return{parents:e,children:[{phenotype:e[0].phenotype.slice(0)}]}}mutate(e){let r=e.phenotype;if(this.prng.nextFloat()<.5)for(let i=0;i<this.switchAmount;i++)r=(0,t.shiftRandomRange)(this.prng,r);else for(let i=0;i<this.switchAmount;i++)r=(0,t.flipRandomSection)(this.prng,r);return{phenotype:r}}environmentSelection(t){return(0,e.sortBest)(t).slice(0,this.populationSize)}}exports.MoreComplexEA=i,i.processorName="MoreComplexEA";
},{"./evolutionary-algorithm":"d2xA","../helper":"pjYw","../es-helper":"qLjA"}],"YGV6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SimpleEA=void 0;var e=require("./evolutionary-algorithm"),t=require("../helper");class r extends e.EvolutionaryAlgorithm{constructor(){super(...arguments),this.childrenSize=.75*this.populationSize|0}createInitialPopulation(e){const r=new Array(this.populationSize);for(let i=0;i<this.populationSize;i++)r[i]={phenotype:(0,t.fisherYatesShuffle)(e,this.prng)};return r}parentSelection(e){return(0,t.fisherYatesShuffle)(e,this.prng).slice(0,this.childrenSize).map(e=>[e])}recombination(e){return{parents:e,children:[{phenotype:e[0].phenotype.slice(0)}]}}mutate(e){return{phenotype:(0,t.turnTwoAround)(e.phenotype,this.prng)}}environmentSelection(t){return(0,e.sortBest)(t).slice(0,this.populationSize)}}exports.SimpleEA=r,r.processorName="SimpleEA";
},{"./evolutionary-algorithm":"d2xA","../helper":"pjYw"}],"ofHR":[function(require,module,exports) {
module.exports={"brute-force":require("./brute-force.ts"),"hill-climbing":require("./hill-climbing.ts"),"more-complex-ea":require("./more-complex-ea.ts"),"simple-ea":require("./simple-ea.ts")};
},{"./brute-force.ts":"yHL5","./hill-climbing.ts":"wBHp","./more-complex-ea.ts":"zL5D","./simple-ea.ts":"YGV6"}],"SFV5":[function(require,module,exports) {
"use strict";var e=require("./worker-helper"),r=o(require("./path-creator/{brute-force,hill-climbing,simple-ea,more-complex-ea}.ts"));function o(e){return e&&e.__esModule?e:{default:e}}const s=new Map;for(const n of Object.values(r.default))for(const e of Object.values(n))if("function"==typeof e){if(s.has(e.processorName))throw new Error("processor "+e.processorName+"was already registered");s.set(e.processorName,e)}const t=e=>new Promise(r=>setTimeout(r,e)),a=new e.WorkerHelper;(async()=>{await a.ready;const e=await a.waitForType("create"),{creator:r,nodes:o,tries:n}=e.payload;if(!s.has(r))return void a.sendError("creator-not-found","creator "+r+", only loaded "+[...s.keys()].join(", "));const c=new(s.get(r))(o,n);for(const s of c)a.sendMessage("progressed",s),await t(50);a.sendMessage("finished")})().catch(e=>a.sendError("uncaught-error",e));
},{"./worker-helper":"tMcB","./path-creator/{brute-force,hill-climbing,simple-ea,more-complex-ea}.ts":"ofHR"}]},{},["SFV5"], null)