parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"tMcB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WorkerHelper=void 0;const e=r=>{if(r instanceof Error)return{message:r.message,stack:r.stack,name:r.name};if("object"!=typeof r)return r;{const s=JSON.stringify(r,(t,s)=>s==r?s:e(s));try{return JSON.parse(s)}catch(t){return console.error("could not parse:",s,"from",r),r}}};class r{constructor(e=self){this.worker=e,this.ready=this.expectType("ready"),this.readyState=!1,this.sendControl("ready"),this.ready.then(()=>this.readyState=!0)}async waitForAnyMessage(){return await this.ready,new Promise((e,r)=>{const t=e=>{if(!e.target)throw new Error("event.target is falsy");e.target.removeEventListener("message",s),e.target.removeEventListener("messageerror",a)},s=r=>{t(r),e(r.data)},a=e=>{t(e),r(e)};this.worker.addEventListener("message",s),this.worker.addEventListener("messageerror",a)})}async expectType(e){const r=await this.waitForAnyMessage();if(r.type!=e)throw new Error("received message with type "+r.type+" which was not expected, expected was "+e);return r}async waitForType(e){for(;;){const r=await this.waitForAnyMessage();if(r.type==e)return r}}sendMessage(r,t,s="normal"){if("control"!=s&&!this.readyState)throw new Error("you can not send a message till this.ready resolved");this.worker.postMessage({channel:s,type:r,payload:e(t),timestamp:Date.now()})}sendError(e,r){this.sendMessage(e,r,"error")}sendControl(e){this.sendMessage(e,void 0,"control")}}exports.WorkerHelper=r;
},{}],"BlS2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PRNG=void 0;class e{constructor(e){e|=0,(e%=2**31-1)<=0&&(e+=2**31-2),this.seed=e}next(){return this.seed=48271*this.seed%(2**31-1)}nextFloat(){return(this.next()-1)/(2**31-2)}randomInteger(e,t,r=!1){return e=Math.ceil(e),t=Math.floor(t),Math.floor(this.nextFloat()*(t-e+r))+e}randomIntegerExcept(e,t,r,s=!1){let o=this.randomInteger(e,t-1,s);return o>=r?o+1:o}}exports.PRNG=e;
},{}],"MnMT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PathCreator=void 0;var e=require("../prng");class s{constructor(s,t,r=new e.PRNG(574100223)){this.availableNodes=s,this.numberOfTries=t,this.prng=r,this.calls=[],this.setAvailableNodes(s)}setAvailableNodes(e){this.availableNodes=e}getAvailableNodes(){return this.availableNodes}countMinorStep(){const e=this.isAllowedToContinue();return this.calls[this.calls.length-1]++,e}minorSteps(){return this.calls[this.calls.length-1]}isAllowedToContinue(){return this.minorSteps()<this.numberOfTries}progress(){return this.calls.push(0),this.step()}next(){return this.isFinished()?{done:!0,value:void 0}:{done:!1,value:this.progress()}}[Symbol.iterator](){return this}}exports.PathCreator=s;
},{"../prng":"BlS2"}],"pjYw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDistance=o,exports.getPathLength=a,exports.fisherYatesShuffle=s,exports.getCombinationOnlyUnique=c,exports.pathEqual=i,exports.switchRandomTwo=h,exports.turnTwoAround=g,exports.isPathBetter=p,exports.pathCompare=m;var e=require("./prng");const{abs:t,pow:n,sqrt:r}=Math;function o(e,o){return r(n(t(e.x-o.x),2)+n(t(e.y-o.y),2))}const u=Symbol("lengthCache"),l=e=>u in e;function a(e){if(l(e))return e[u];if(e.length<=1)throw new Error("length can not be calculated for an path with one or non nodes");let t=0,n=e[0];for(let r=1;r<e.length;r++){const u=e[r];t+=o(n,u),n=u}return t+=o(e[0],n),Object.defineProperty(e,u,{value:t,configurable:!1,enumerable:!1}),t}function s(e,t){const n=Array.from(e);for(let r=0;r<n.length-2;r++){const e=t.randomInteger(r,n.length),o=n[r];n[r]=n[e],n[e]=o}return n}function*c(e,t=e.length){for(let n=0;n<e.length;n++){const r=e.slice(0),o=r.splice(n,1)[0];if(t>1)for(const e of c(r,t-1))yield[o,...e];else yield[o]}}function i(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n].name!=t[n].name)return!1;return!0}function f(e,t,n){const r=Array.from(e),o=r[t];return r[t]=r[n],r[n]=o,r}function h(t,n){n||(n=new e.PRNG(Math.random()*Number.MAX_SAFE_INTEGER));const r=n.randomInteger(0,t.length);return f(t,r,n.randomIntegerExcept(0,t.length,r))}function g(t,n){n||(n=new e.PRNG(Math.random()*Number.MAX_SAFE_INTEGER));const r=n.randomInteger(0,t.length);return f(t,r,(r+1)%t.length)}function p(e,t){return-1==m(e,t)}function m(e,t){const n=a(e)-a(t);return n<0?-1:n>0?1:0}
},{"./prng":"BlS2"}],"yHL5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BruteForce=void 0;var t=require("./path-creator"),e=require("../helper");class s extends t.PathCreator{constructor(t,s){super(t,s),this.allCombination=(0,e.getCombinationOnlyUnique)(this.availableNodes),this.done=!1,this.shortestLength=(0,e.getPathLength)(t),this.shortestPath=t}step(){let t;for(;!(t=this.allCombination.next()).done&&t.value&&this.countMinorStep();){const s=t.value;let r=(0,e.getPathLength)(s);if(!this.shortestLength||r<this.shortestLength)return this.shortestLength=r,this.shortestPath=s,s}if(null==this.shortestPath)throw this.done=!0,new Error("there are no available combinations");return this.done=!0,this.shortestPath}isFinished(){return this.done}}exports.BruteForce=s,s.processorName="BruteForce";
},{"./path-creator":"MnMT","../helper":"pjYw"}],"d2xA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SimpleEA=void 0;var e=require("../helper"),t=require("./path-creator");const i=(t,i)=>(0,e.pathCompare)(t.phenotype,i.phenotype),n=e=>Array.from(e).sort(i),o=(t,i)=>(0,e.isPathBetter)(t.phenotype,i.phenotype),s=e=>{let t=e[0];for(let n=1;n<e.length;n++)1==i(t,e[n])&&(t=e[n]);return t};class r extends t.PathCreator{constructor(){super(...arguments),this.populationSize=100,this.population=null,this.finished=!1,this.lastBest=this.doGeneration()}step(){for(let t=0;t<this.numberOfTries;t++){const i=this.doGeneration();if((0,e.isPathBetter)(i,this.lastBest))return this.lastBest=i;t%1e4==0&&console.log("trying for",t)}return this.finished=!0,this.lastBest}isFinished(){return this.finished}doGeneration(){if(null==this.population)this.population=this.createInitialPopulation(this.availableNodes);else{let e=[];const t=this.parentSelection(this.population);for(const i of t){const t=this.recombination(i);e=e.concat(t.parents,t.children.map(e=>this.mutate(e)))}this.population=this.environmentSelection(e)}return s(this.population).phenotype}}class p extends r{constructor(){super(...arguments),this.childrenSize=.75*this.populationSize|0}createInitialPopulation(t){const i=new Array(this.populationSize);for(let n=0;n<this.populationSize;n++)i[n]={phenotype:(0,e.fisherYatesShuffle)(t,this.prng)};return i}parentSelection(t){return(0,e.fisherYatesShuffle)(t,this.prng).slice(0,this.childrenSize).map(e=>[e])}recombination(e){return{parents:e,children:[{phenotype:e[0].phenotype.slice(0)}]}}mutate(t){return{phenotype:(0,e.turnTwoAround)(t.phenotype,this.prng)}}environmentSelection(e){return n(e).slice(0,this.populationSize)}}exports.SimpleEA=p,p.processorName="SimpleEA";
},{"../helper":"pjYw","./path-creator":"MnMT"}],"wBHp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HillClimbing=void 0;var e=require("./path-creator"),i=require("../helper"),t=require("../prng");class s{constructor(e,i){this.value=e,this.allowedTries=i,this.finishedFlag=!1}findNext(){let e=this.allowedTries;const i=this.value,t=this.calculateFit(i);let s=i,r=t;for(;e-- >0;)if(s=this.step(s),r=this.calculateFit(s),this.improved(r,t))return this.value=s;return this.finishedFlag=!0,i}finished(){return this.finishedFlag}}class r extends s{constructor(e,i,s=new t.PRNG(1e4)){super(e,i),this.prng=s}step(e){return(0,i.switchRandomTwo)(e,this.prng)}calculateFit(e){return(0,i.getPathLength)(e)}improved(e,i){return e<i}}class l extends e.PathCreator{setAvailableNodes(e){this.availableNodes=e,this.hillClimber=new r(e,this.numberOfTries)}step(){return this.hillClimber.findNext()}isFinished(){return this.hillClimber.finished()}}exports.HillClimbing=l,l.processorName="HillClimbing";
},{"./path-creator":"MnMT","../helper":"pjYw","../prng":"BlS2"}],"UcRD":[function(require,module,exports) {
module.exports={"brute-force":require("./brute-force.ts"),"evolutionary-algorithm":require("./evolutionary-algorithm.ts"),"hill-climbing":require("./hill-climbing.ts")};
},{"./brute-force.ts":"yHL5","./evolutionary-algorithm.ts":"d2xA","./hill-climbing.ts":"wBHp"}],"SFV5":[function(require,module,exports) {
"use strict";var e=require("./worker-helper"),r=o(require("./path-creator/{brute-force,hill-climbing,evolutionary-algorithm}.ts"));function o(e){return e&&e.__esModule?e:{default:e}}const s=new Map;for(const n of Object.values(r.default))for(const e of Object.values(n))if("function"==typeof e){if(s.has(e.processorName))throw new Error("processor "+e.processorName+"was already registered");s.set(e.processorName,e)}const t=e=>new Promise(r=>setTimeout(r,e)),a=new e.WorkerHelper;(async()=>{await a.ready;const e=await a.waitForType("create"),{creator:r,nodes:o,tries:n}=e.payload;if(!s.has(r))return void a.sendError("creator-not-found","creator "+r+", only loaded "+[...s.keys()].join(", "));const c=new(s.get(r))(o,n);for(const s of c)a.sendMessage("progressed",s),await t(50);a.sendMessage("finished")})().catch(e=>a.sendError("uncaught-error",e));
},{"./worker-helper":"tMcB","./path-creator/{brute-force,hill-climbing,evolutionary-algorithm}.ts":"UcRD"}]},{},["SFV5"], null)